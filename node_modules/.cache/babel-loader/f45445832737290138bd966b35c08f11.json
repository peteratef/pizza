{"ast":null,"code":"import _toConsumableArray from \"D:\\\\projects\\\\react\\\\tasks\\\\pizza\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\projects\\\\react\\\\tasks\\\\pizza\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"D:\\\\projects\\\\react\\\\tasks\\\\pizza\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\projects\\\\react\\\\tasks\\\\pizza\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport uuid from \"react-uuid\";\nimport { ADD_TO_CART, ADD_PIZZA, DELETE_ITEM, EDIT_PIZZA, REMOVE_ITEM, SUB_QUANTITY, ADD_QUANTITY, // ADD_SHIPPING,\nCHANGE_FILTER, ON_INIT_FUNCTION } from \"./action-types/cart-actions\"; //add cart action\n\nexport var initFunction = function initFunction() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: ON_INIT_FUNCTION\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var changeFilter = function changeFilter(value, selectedValue) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n        var state, filteredProducts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = getState();\n                filteredProducts = [];\n\n                if (value.length > 0 || selectedValue.length > 0) {\n                  filteredProducts = state.items.filter(function (each) {\n                    if (selectedValue !== \"select_Department\") {\n                      return each.title.includes(value) && each.dep.includes(selectedValue);\n                    } else {\n                      return each.title.includes(value);\n                    }\n                  });\n                } else {\n                  filteredProducts = state.items;\n                }\n\n                dispatch({\n                  type: CHANGE_FILTER,\n                  filteredProducts: filteredProducts\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var removeItem = function removeItem(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n        var state, itemToRemove, new_items, priceAfterDiscount, newTotal;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                state = getState();\n                itemToRemove = state.addedItems.find(function (item) {\n                  return id === item.id;\n                });\n                new_items = state.addedItems.filter(function (item) {\n                  return id !== item.id;\n                });\n                priceAfterDiscount = itemToRemove.price;\n\n                if (itemToRemove.activeDiscount) {\n                  priceAfterDiscount = itemToRemove.price - itemToRemove.price * itemToRemove.discount / 100;\n                } //calculating the total\n\n\n                newTotal = state.total - priceAfterDiscount * itemToRemove.quantity;\n                dispatch({\n                  type: REMOVE_ITEM,\n                  addedItems: new_items,\n                  total: newTotal\n                });\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}; /////////////delete item (pizza)///////\n\nexport var deleteItem = function deleteItem(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n        var state, new_items;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                state = getState();\n                console.log(id, \"iddd\");\n                new_items = state.items.filter(function (item) {\n                  return id !== item.id;\n                });\n                console.log(new_items, \"new items\");\n                dispatch({\n                  type: DELETE_ITEM,\n                  items: new_items\n                });\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function (_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n}; ////// edit pizza /////\n\nexport var editPizza = function editPizza(formValues) {\n  console.log(formValues, \"formValues\");\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n        var state, updatedItems, addedItem;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                state = getState();\n                updatedItems = state.items;\n                addedItem = [{\n                  id: uuid(),\n                  activeDiscount: \"\",\n                  discount: 5,\n                  title: formValues[\"name\"],\n                  desc: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ex.\",\n                  price: formValues[\"price\"],\n                  img: \"\",\n                  dep: formValues[\"type\"]\n                }]; //check if the action id exists in the addedItems\n                // updatedItems = state.items.concat(addedItem);\n\n                updatedItems = addedItem.concat(state.items);\n                console.log(updatedItems, \"updateditems\");\n                dispatch({\n                  type: ADD_PIZZA,\n                  items: updatedItems\n                });\n\n              case 6:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function (_x9, _x10) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n}; ////// ADD Pizza /////\n\nexport var addPizza = function addPizza(formValues) {\n  console.log(formValues, \"formValues\");\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref6 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(dispatch, getState) {\n        var state, updatedItems, addedItem;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                state = getState();\n                updatedItems = state.items;\n                addedItem = [{\n                  id: uuid(),\n                  activeDiscount: \"\",\n                  discount: 5,\n                  title: formValues[\"name\"],\n                  desc: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ex.\",\n                  price: formValues[\"price\"],\n                  img: \"\",\n                  dep: formValues[\"type\"]\n                }]; //check if the action id exists in the addedItems\n                // updatedItems = state.items.concat(addedItem);\n\n                updatedItems = addedItem.concat(state.items);\n                console.log(updatedItems, \"updateditems\");\n                dispatch({\n                  type: ADD_PIZZA,\n                  items: updatedItems\n                });\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      return function (_x11, _x12) {\n        return _ref6.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var addToCart = function addToCart(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref7 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(dispatch, getState) {\n        var state, addedItem, existed_item, priceAfterDiscount, newTotal;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                state = getState();\n                addedItem = state.items.find(function (item) {\n                  return item.id === id;\n                }); //check if the action id exists in the addedItems\n\n                existed_item = state.addedItems.find(function (item) {\n                  return id === item.id;\n                });\n                priceAfterDiscount = addedItem.price;\n\n                if (addedItem.activeDiscount) {\n                  priceAfterDiscount = addedItem.price - addedItem.price * addedItem.discount / 100;\n                }\n\n                if (existed_item) {\n                  addedItem.quantity += 1;\n                  dispatch(_objectSpread({\n                    type: ADD_TO_CART\n                  }, state, {\n                    total: state.total + priceAfterDiscount\n                  }));\n                } else {\n                  addedItem.quantity = 1;\n                  newTotal = state.total + priceAfterDiscount;\n                  dispatch({\n                    type: ADD_TO_CART,\n                    addedItems: _toConsumableArray(state.addedItems).concat([addedItem]),\n                    total: newTotal\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      return function (_x13, _x14) {\n        return _ref7.apply(this, arguments);\n      };\n    }()\n  );\n}; //subtract qt action\n\nexport var subtractQuantity = function subtractQuantity(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref8 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(dispatch, getState) {\n        var state, new_items, newTotal, addedItem, priceAfterDiscount;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                state = getState();\n                new_items = [];\n                newTotal = 0;\n                addedItem = state.items.find(function (item) {\n                  return item.id === id;\n                }); //if the qt == 0 then it should be removed\n\n                priceAfterDiscount = addedItem.price;\n\n                if (addedItem.activeDiscount) {\n                  priceAfterDiscount = addedItem.price - addedItem.price * addedItem.discount / 100;\n                }\n\n                if (addedItem.quantity === 1) {\n                  new_items = state.addedItems.filter(function (item) {\n                    return item.id !== id;\n                  });\n                  newTotal = state.total - priceAfterDiscount;\n                } else {\n                  addedItem.quantity -= 1;\n                  new_items = state.addedItems;\n                  newTotal = state.total - priceAfterDiscount;\n                }\n\n                dispatch(_objectSpread({\n                  type: SUB_QUANTITY\n                }, state, {\n                  addedItems: new_items,\n                  addedtotal: newTotal\n                }));\n\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      return function (_x15, _x16) {\n        return _ref8.apply(this, arguments);\n      };\n    }()\n  );\n}; //add qt action\n\nexport var addQuantity = function addQuantity(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(dispatch, getState) {\n        var state, addedItem, priceAfterDiscount, newTotal;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                state = getState();\n                addedItem = state.items.find(function (item) {\n                  return item.id === id;\n                });\n                addedItem.quantity += 1;\n                priceAfterDiscount = addedItem.price;\n\n                if (addedItem.activeDiscount) {\n                  priceAfterDiscount = addedItem.price - addedItem.price * addedItem.discount / 100;\n                }\n\n                newTotal = state.total + priceAfterDiscount;\n                dispatch({\n                  type: ADD_QUANTITY,\n                  newTotal: newTotal\n                });\n\n              case 7:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      return function (_x17, _x18) {\n        return _ref9.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["D:\\projects\\react\\tasks\\pizza\\src\\components\\actions\\cartActions.js"],"names":["uuid","ADD_TO_CART","ADD_PIZZA","DELETE_ITEM","EDIT_PIZZA","REMOVE_ITEM","SUB_QUANTITY","ADD_QUANTITY","CHANGE_FILTER","ON_INIT_FUNCTION","initFunction","dispatch","getState","type","changeFilter","value","selectedValue","state","filteredProducts","length","items","filter","each","title","includes","dep","removeItem","id","itemToRemove","addedItems","find","item","new_items","priceAfterDiscount","price","activeDiscount","discount","newTotal","total","quantity","deleteItem","console","log","editPizza","formValues","updatedItems","addedItem","desc","img","concat","addPizza","addToCart","existed_item","subtractQuantity","addedtotal","addQuantity"],"mappings":"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","sourcesContent":["import uuid from \"react-uuid\";\r\nimport {\r\n  ADD_TO_CART,\r\n  ADD_PIZZA,\r\n  DELETE_ITEM,\r\n  EDIT_PIZZA,\r\n  REMOVE_ITEM,\r\n  SUB_QUANTITY,\r\n  ADD_QUANTITY,\r\n\r\n  // ADD_SHIPPING,\r\n  CHANGE_FILTER,\r\n  ON_INIT_FUNCTION,\r\n} from \"./action-types/cart-actions\";\r\n\r\n//add cart action\r\nexport const initFunction = () => {\r\n  return async (dispatch, getState) => {\r\n    dispatch({\r\n      type: ON_INIT_FUNCTION,\r\n    });\r\n  };\r\n};\r\nexport const changeFilter = (value, selectedValue) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let filteredProducts = [];\r\n\r\n    if (value.length > 0 || selectedValue.length > 0) {\r\n      filteredProducts = state.items.filter((each) => {\r\n        if (selectedValue !== \"select_Department\") {\r\n          return each.title.includes(value) && each.dep.includes(selectedValue);\r\n        } else {\r\n          return each.title.includes(value);\r\n        }\r\n      });\r\n    } else {\r\n      filteredProducts = state.items;\r\n    }\r\n\r\n    dispatch({\r\n      type: CHANGE_FILTER,\r\n      filteredProducts,\r\n    });\r\n  };\r\n};\r\nexport const removeItem = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let itemToRemove = state.addedItems.find((item) => id === item.id);\r\n    let new_items = state.addedItems.filter((item) => id !== item.id);\r\n    let priceAfterDiscount = itemToRemove.price;\r\n    if (itemToRemove.activeDiscount) {\r\n      priceAfterDiscount =\r\n        itemToRemove.price - (itemToRemove.price * itemToRemove.discount) / 100;\r\n    }\r\n    //calculating the total\r\n    let newTotal = state.total - priceAfterDiscount * itemToRemove.quantity;\r\n\r\n    dispatch({\r\n      type: REMOVE_ITEM,\r\n      addedItems: new_items,\r\n      total: newTotal,\r\n    });\r\n  };\r\n};\r\n/////////////delete item (pizza)///////\r\nexport const deleteItem = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    console.log(id, \"iddd\");\r\n    let new_items = state.items.filter((item) => id !== item.id);\r\n    console.log(new_items, \"new items\");\r\n    dispatch({\r\n      type: DELETE_ITEM,\r\n      items: new_items,\r\n    });\r\n  };\r\n};\r\n////// edit pizza /////\r\n\r\nexport const editPizza = (formValues) => {\r\n  console.log(formValues, \"formValues\");\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let updatedItems = state.items;\r\n    let addedItem = [\r\n      {\r\n        id: uuid(),\r\n        activeDiscount: \"\",\r\n        discount: 5,\r\n        title: formValues[\"name\"],\r\n        desc:\r\n          \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ex.\",\r\n        price: formValues[\"price\"],\r\n        img: \"\",\r\n        dep: formValues[\"type\"],\r\n      },\r\n    ];\r\n    //check if the action id exists in the addedItems\r\n    // updatedItems = state.items.concat(addedItem);\r\n    updatedItems = addedItem.concat(state.items);\r\n    console.log(updatedItems, \"updateditems\");\r\n    dispatch({\r\n      type: ADD_PIZZA,\r\n      items: updatedItems,\r\n    });\r\n  };\r\n};\r\n////// ADD Pizza /////\r\nexport const addPizza = (formValues) => {\r\n  console.log(formValues, \"formValues\");\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let updatedItems = state.items;\r\n    let addedItem = [\r\n      {\r\n        id: uuid(),\r\n        activeDiscount: \"\",\r\n        discount: 5,\r\n        title: formValues[\"name\"],\r\n        desc:\r\n          \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima, ex.\",\r\n        price: formValues[\"price\"],\r\n        img: \"\",\r\n        dep: formValues[\"type\"],\r\n      },\r\n    ];\r\n    //check if the action id exists in the addedItems\r\n    // updatedItems = state.items.concat(addedItem);\r\n    updatedItems = addedItem.concat(state.items);\r\n    console.log(updatedItems, \"updateditems\");\r\n    dispatch({\r\n      type: ADD_PIZZA,\r\n      items: updatedItems,\r\n    });\r\n  };\r\n};\r\n\r\nexport const addToCart = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    let addedItem = state.items.find((item) => item.id === id);\r\n    //check if the action id exists in the addedItems\r\n    let existed_item = state.addedItems.find((item) => id === item.id);\r\n    let priceAfterDiscount = addedItem.price;\r\n    if (addedItem.activeDiscount) {\r\n      priceAfterDiscount =\r\n        addedItem.price - (addedItem.price * addedItem.discount) / 100;\r\n    }\r\n    if (existed_item) {\r\n      addedItem.quantity += 1;\r\n      dispatch({\r\n        type: ADD_TO_CART,\r\n        ...state,\r\n        total: state.total + priceAfterDiscount,\r\n      });\r\n    } else {\r\n      addedItem.quantity = 1;\r\n      let newTotal = state.total + priceAfterDiscount;\r\n      dispatch({\r\n        type: ADD_TO_CART,\r\n        addedItems: [...state.addedItems, addedItem],\r\n        total: newTotal,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\n//subtract qt action\r\nexport const subtractQuantity = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let new_items = [];\r\n    let newTotal = 0;\r\n    let addedItem = state.items.find((item) => item.id === id);\r\n    //if the qt == 0 then it should be removed\r\n    let priceAfterDiscount = addedItem.price;\r\n    if (addedItem.activeDiscount) {\r\n      priceAfterDiscount =\r\n        addedItem.price - (addedItem.price * addedItem.discount) / 100;\r\n    }\r\n    if (addedItem.quantity === 1) {\r\n      new_items = state.addedItems.filter((item) => item.id !== id);\r\n\r\n      newTotal = state.total - priceAfterDiscount;\r\n    } else {\r\n      addedItem.quantity -= 1;\r\n      new_items = state.addedItems;\r\n      newTotal = state.total - priceAfterDiscount;\r\n    }\r\n    dispatch({\r\n      type: SUB_QUANTITY,\r\n      ...state,\r\n      addedItems: new_items,\r\n      addedtotal: newTotal,\r\n    });\r\n  };\r\n};\r\n//add qt action\r\nexport const addQuantity = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let addedItem = state.items.find((item) => item.id === id);\r\n    addedItem.quantity += 1;\r\n    let priceAfterDiscount = addedItem.price;\r\n    if (addedItem.activeDiscount) {\r\n      priceAfterDiscount =\r\n        addedItem.price - (addedItem.price * addedItem.discount) / 100;\r\n    }\r\n    let newTotal = state.total + priceAfterDiscount;\r\n    dispatch({ type: ADD_QUANTITY, newTotal: newTotal });\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}