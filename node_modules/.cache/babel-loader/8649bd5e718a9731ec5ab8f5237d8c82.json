{"ast":null,"code":"import _toConsumableArray from \"D:\\\\projects\\\\react\\\\React-Shopping-Cart\\\\Shopping-Cart\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\projects\\\\react\\\\React-Shopping-Cart\\\\Shopping-Cart\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"D:\\\\projects\\\\react\\\\React-Shopping-Cart\\\\Shopping-Cart\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\projects\\\\react\\\\React-Shopping-Cart\\\\Shopping-Cart\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport { ADD_TO_CART, REMOVE_ITEM, SUB_QUANTITY, ADD_QUANTITY, ADD_SHIPPING, CHANGE_FILTER, ON_INIT_FUNCTION } from \"./action-types/cart-actions\"; //add cart action\n\nexport var initFunction = function initFunction() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n        var state;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                state = getState();\n                dispatch({\n                  type: ON_INIT_FUNCTION\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var changeFilter = function changeFilter(value, selectedValue) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n        var state, filteredProducts;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = getState();\n                filteredProducts = [];\n\n                if (value.length > 0 || selectedValue.length > 0) {\n                  filteredProducts = state.items.filter(function (each) {\n                    if (selectedValue !== \"select_Department\") {\n                      return each.title.includes(value) && each.dep.includes(selectedValue);\n                    } else {\n                      return each.title.includes(value);\n                    }\n                  });\n                } else {\n                  filteredProducts = state.items;\n                }\n\n                dispatch({\n                  type: CHANGE_FILTER,\n                  filteredProducts: filteredProducts\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var addToCart = function addToCart(id) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n        var state, newTotal, addedItem, existed_item, priceAfterDiscount;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                state = getState();\n                console.log(state, \"state\");\n                newTotal = 0;\n                addedItem = state.items.find(function (item) {\n                  return item.id === id;\n                }); //check if the action id exists in the addedItems\n\n                existed_item = state.addedItems.find(function (item) {\n                  return id === item.id;\n                });\n                priceAfterDiscount = addedItem.price;\n\n                if (addedItem.activeDiscount) {\n                  priceAfterDiscount = addedItem.price - addedItem.price * addedItem.discount / 100;\n                }\n\n                if (!existed_item) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                console.log(\"existed item\");\n                addedItem.quantity += 1;\n                return _context3.abrupt(\"return\", _objectSpread({}, state, {\n                  newTotal: state.total + priceAfterDiscount\n                }));\n\n              case 13:\n                addedItem.quantity = 1;\n                newTotal = state.total + priceAfterDiscount;\n\n              case 15:\n                dispatch({\n                  type: ADD_TO_CART,\n                  addedItems: _toConsumableArray(state.addedItems).concat([addedItem]),\n                  total: newTotal\n                });\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}; //remove item action\n\nexport var removeItem = function removeItem(id) {\n  return {\n    type: REMOVE_ITEM,\n    id: id\n  };\n}; //subtract qt action\n\nexport var subtractQuantity = function subtractQuantity(id) {\n  return {\n    type: SUB_QUANTITY,\n    id: id\n  };\n}; //add qt action\n\nexport var addQuantity = function addQuantity(id) {\n  return {\n    type: ADD_QUANTITY,\n    id: id\n  };\n};","map":{"version":3,"sources":["D:\\projects\\react\\React-Shopping-Cart\\Shopping-Cart\\src\\components\\actions\\cartActions.js"],"names":["ADD_TO_CART","REMOVE_ITEM","SUB_QUANTITY","ADD_QUANTITY","ADD_SHIPPING","CHANGE_FILTER","ON_INIT_FUNCTION","initFunction","dispatch","getState","state","type","changeFilter","value","selectedValue","filteredProducts","length","items","filter","each","title","includes","dep","addToCart","id","console","log","newTotal","addedItem","find","item","existed_item","addedItems","priceAfterDiscount","price","activeDiscount","discount","quantity","total","removeItem","subtractQuantity","addQuantity"],"mappings":"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","sourcesContent":["import {\r\n  ADD_TO_CART,\r\n  REMOVE_ITEM,\r\n  SUB_QUANTITY,\r\n  ADD_QUANTITY,\r\n  ADD_SHIPPING,\r\n  CHANGE_FILTER,\r\n  ON_INIT_FUNCTION,\r\n} from \"./action-types/cart-actions\";\r\n\r\n//add cart action\r\nexport const initFunction = () => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    dispatch({\r\n      type: ON_INIT_FUNCTION,\r\n    });\r\n  };\r\n};\r\nexport const changeFilter = (value, selectedValue) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    let filteredProducts = [];\r\n\r\n    if (value.length > 0 || selectedValue.length > 0) {\r\n      filteredProducts = state.items.filter((each) => {\r\n        if (selectedValue !== \"select_Department\") {\r\n          return each.title.includes(value) && each.dep.includes(selectedValue);\r\n        } else {\r\n          return each.title.includes(value);\r\n        }\r\n      });\r\n    } else {\r\n      filteredProducts = state.items;\r\n    }\r\n\r\n    dispatch({\r\n      type: CHANGE_FILTER,\r\n      filteredProducts,\r\n    });\r\n  };\r\n};\r\nexport const addToCart = (id) => {\r\n  return async (dispatch, getState) => {\r\n    const state = getState();\r\n    console.log(state, \"state\");\r\n    let newTotal = 0;\r\n    let addedItem = state.items.find((item) => item.id === id);\r\n    //check if the action id exists in the addedItems\r\n    let existed_item = state.addedItems.find((item) => id === item.id);\r\n    let priceAfterDiscount = addedItem.price;\r\n    if (addedItem.activeDiscount) {\r\n      priceAfterDiscount =\r\n        addedItem.price - (addedItem.price * addedItem.discount) / 100;\r\n    }\r\n    if (existed_item) {\r\n      console.log(\"existed item\");\r\n      addedItem.quantity += 1;\r\n      return {\r\n        ...state,\r\n        newTotal: state.total + priceAfterDiscount,\r\n      };\r\n    } else {\r\n      addedItem.quantity = 1;\r\n\r\n      newTotal = state.total + priceAfterDiscount;\r\n    }\r\n    dispatch({\r\n      type: ADD_TO_CART,\r\n      addedItems: [...state.addedItems, addedItem],\r\n      total: newTotal,\r\n    });\r\n  };\r\n};\r\n\r\n//remove item action\r\nexport const removeItem = (id) => {\r\n  return {\r\n    type: REMOVE_ITEM,\r\n    id,\r\n  };\r\n};\r\n//subtract qt action\r\nexport const subtractQuantity = (id) => {\r\n  return {\r\n    type: SUB_QUANTITY,\r\n    id,\r\n  };\r\n};\r\n//add qt action\r\nexport const addQuantity = (id) => {\r\n  return {\r\n    type: ADD_QUANTITY,\r\n    id,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}